(function(){"use strict";var t=this,n=t.helpers,r={formatDateValue:function(n){var t,r;return(n=new Date(+n),t=n.getUTCMilliseconds(),t)?("000"+t).slice(-3):(r=n.getUTCHours()+n.getUTCMinutes()+n.getUTCSeconds(),r?i(n,"h:MM",!0):i(n,"mmm d",!0))}},i=function(){var r=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,u=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,n=function(n,t){for(n=String(n),t=t||2;n.length<t;)n="0"+n;return n},i={"default":"ddd mmm dd yyyy HH:MM:ss"},t={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(e,o,s){if(arguments.length!=1||Object.prototype.toString.call(e)!="[object String]"||/\d/.test(e)||(o=e,e=undefined),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");o=String(i[o]||o||i["default"]);o.slice(0,4)=="UTC:"&&(o=o.slice(4),s=!0);var h=s?"getUTC":"get",l=e[h+"Date"](),p=e[h+"Day"](),a=e[h+"Month"](),w=e[h+"FullYear"](),c=e[h+"Hours"](),b=e[h+"Minutes"](),k=e[h+"Seconds"](),v=e[h+"Milliseconds"](),y=s?0:e.getTimezoneOffset(),d={d:l,dd:n(l),ddd:t.dayNames[p],dddd:t.dayNames[p+7],m:a+1,mm:n(a+1),mmm:t.monthNames[a],mmmm:t.monthNames[a+12],yy:String(w).slice(2),yyyy:w,h:c%12||12,hh:n(c%12||12),H:c,HH:n(c),M:b,MM:n(b),s:k,ss:n(k),l:n(v,3),L:n(v>99?Math.round(v/10):v),t:c<12?"a":"p",tt:c<12?"am":"pm",T:c<12?"A":"P",TT:c<12?"AM":"PM",Z:s?"UTC":(String(e).match(u)||[""]).pop().replace(f,""),o:(y>0?"-":"+")+n(Math.floor(Math.abs(y)/60)*100+Math.abs(y)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return o.replace(r,function(n){return n in d?d[n]:n.slice(1,n.length-1)})}}();t.ScatterNumberScale=t.Element.extend({initialize:function(){this.font=n.fontString(this.fontSize,this.fontStyle,this.fontFamily);this.padding=this.fontSize/2;this.padding2=this.fontSize*1.5},setDataRange:function(n){this.dataRange=n},api:{getElementOrDefault:function(n,t,i){return t>=0&&t<n.length?n[t]:i},applyRange:function(n,t,i){return n>i?i:n<t?t:n},calculateControlPoints:function(n,t,i,r,u){var c=!n?0:u,l=!i?0:u,e=t,s=n?n:t,a=i?i:t,v={xx:e.arg-s.arg,yy:e.value-s.value},f={xx:a.arg-s.arg,yy:a.value-s.value},p=v.xx*f.xx+v.yy*f.yy,y=Math.sqrt(f.xx*f.xx+f.yy*f.yy),h=Math.min(Math.max(p/(y*y),.3),.7),o={before:{x:e.arg-f.xx*h*c,y:e.value-f.yy*h*c},after:{x:e.arg+f.xx*(1-h)*l,y:e.value+f.yy*(1-h)*l}};return o.before.y=this.applyRange(o.before.y,r.ymin,r.ymax),o.after.y=this.applyRange(o.after.y,r.ymin,r.ymax),o},generateLabels:function(t,i,r,u){var f=new Array(i);return t&&n.each(f,function(i,e){f[e]=n.template(t,{value:r+u*e})}),f}},calculateYscaleRange:function(){this.yScaleRange=n.calculateScaleRange([this.dataRange.ymin,this.dataRange.ymax],this.chart.height,this.fontSize,this.beginAtZero,this.integersOnly)},calculateXscaleRange:function(){this.xScaleRange=n.calculateScaleRange([this.dataRange.xmin,this.dataRange.xmax],this.chart.width,this.fontSize,!1,!0)},generateYLabels:function(){this.yLabels=this.api.generateLabels(this.labelTemplate,this.yScaleRange.steps,this.yScaleRange.min,this.yScaleRange.stepValue)},generateXLabels:function(){this.xLabels=this.api.generateLabels(this.argLabelTemplate,this.xScaleRange.steps,this.xScaleRange.min,this.xScaleRange.stepValue)},argToString:function(n){return+n+""},fit:function(){this.calculateYscaleRange();this.generateYLabels();this.xPadding=this.showLabels?n.longestText(this.chart.ctx,this.font,this.yLabels)+this.padding2:0;this.calculateXscaleRange();this.generateXLabels();var i=Math.floor((this.chart.width-this.xPadding)/this.xScaleRange.steps),t=n.longestText(this.chart.ctx,this.font,this.xLabels),r=this.fontSize*1.5;this.xLabelRotation=t>i;this.yPadding=this.showLabels?(this.xLabelRotation?t:r)+this.padding2:0},updateBezierControlPoints:function(n,t,i){for(var r=0;r<n.length;r++){var f=this.api.getElementOrDefault(n,r),e=this.api.getElementOrDefault(n,r-1),o=this.api.getElementOrDefault(n,r+1),u=this.api.calculateControlPoints(e,f,o,this.dataRange,i);f.controlPoints={x1:this.calculateX(u.before.x),y1:this.calculateY(u.before.y,t),x2:this.calculateX(u.after.x),y2:this.calculateY(u.after.y,t)}}},updatePoints:function(n,t){for(var i,r=0;r<n.length;r++)i=n[r],i.x=this.calculateX(i.arg),i.y=this.calculateY(i.value,t)},calculateX:function(n){return this.xPadding+(n-this.xScaleRange.min)*(this.chart.width-this.xPadding-this.padding)/(this.xScaleRange.max-this.xScaleRange.min)},calculateY:function(n,t){return this.chart.height-this.yPadding-(n-this.yScaleRange.min)*(this.chart.height-this.yPadding-this.padding)/(this.yScaleRange.max-this.yScaleRange.min)*(t||1)},draw:function(){var n=this.chart.ctx,u,t,f,e;if(this.display){var i=this.calculateX(this.xScaleRange.min),o=this.chart.width,r=this.calculateY(this.yScaleRange.min);for(t=0,u=this.yScaleRange.min;t<=this.yScaleRange.steps;t++,u+=this.yScaleRange.stepValue)f=this.calculateY(u),this.showHorizontalLines&&(n.lineWidth=this.gridLineWidth,n.strokeStyle=this.gridLineColor,n.beginPath(),n.moveTo(i,f),n.lineTo(o,f),n.stroke()),this.showLabels&&(n.lineWidth=this.lineWidth,n.strokeStyle=this.lineColor,n.beginPath(),n.moveTo(i,f),n.lineTo(i-this.padding2/3,f),n.stroke(),n.textAlign="right",n.textBaseline="middle",n.font=this.font,n.fillStyle=this.textColor,n.fillText(this.yLabels[t],i-this.padding2/2,f));for(t=0,u=this.xScaleRange.min;t<=this.xScaleRange.steps;t++,u+=this.xScaleRange.stepValue)e=this.calculateX(u),this.showVerticalLines&&(n.lineWidth=this.gridLineWidth,n.strokeStyle=this.gridLineColor,n.beginPath(),n.moveTo(e,r),n.lineTo(e,0),n.stroke()),this.showLabels&&(n.lineWidth=this.lineWidth,n.strokeStyle=this.lineColor,n.beginPath(),n.moveTo(e,r),n.lineTo(e,r+this.padding2/3),n.stroke(),n.save(),n.translate(e,r+this.padding2/2),n.rotate(this.xLabelRotation?-Math.PI/2:0),n.textAlign=this.xLabelRotation?"right":"center",n.textBaseline=this.xLabelRotation?"middle":"top",n.font=this.font,n.fillStyle=this.textColor,n.fillText(this.xLabels[t],0,0),n.restore());n.lineWidth=this.lineWidth;n.strokeStyle=this.lineColor;n.beginPath();n.moveTo(i,0);n.lineTo(i,r);n.stroke();n.beginPath();n.moveTo(i,r);n.lineTo(o,r);n.stroke()}}});t.ScatterDateScale=t.ScatterNumberScale.extend({_calculateDateScaleRange:function(n,t,i,r){for(var o=[{u:1,c:1,t:1,n:"ms"},{u:1,c:2,t:2,n:"ms"},{u:1,c:5,t:5,n:"ms"},{u:1,c:10,t:10,n:"ms"},{u:1,c:20,t:20,n:"ms"},{u:1,c:50,t:50,n:"ms"},{u:1,c:100,t:100,n:"ms"},{u:1,c:200,t:200,n:"ms"},{u:1,c:500,t:500,n:"ms"},{u:1e3,c:1,t:1e3,n:"s"},{u:1e3,c:2,t:2e3,n:"s"},{u:1e3,c:5,t:5e3,n:"s"},{u:1e3,c:10,t:1e4,n:"s"},{u:1e3,c:15,t:15e3,n:"s"},{u:1e3,c:20,t:2e4,n:"s"},{u:1e3,c:30,t:3e4,n:"s"},{u:6e4,c:1,t:6e4,n:"m"},{u:6e4,c:2,t:12e4,n:"m"},{u:6e4,c:5,t:3e5,n:"m"},{u:6e4,c:10,t:6e5,n:"m"},{u:6e4,c:15,t:9e5,n:"m"},{u:6e4,c:20,t:12e5,n:"m"},{u:6e4,c:30,t:18e5,n:"m"},{u:36e5,c:1,t:36e5,n:"h"},{u:36e5,c:2,t:72e5,n:"h"},{u:36e5,c:3,t:108e5,n:"h"},{u:36e5,c:4,t:144e5,n:"h"},{u:36e5,c:6,t:216e5,n:"h"},{u:36e5,c:8,t:288e5,n:"h"},{u:36e5,c:12,t:432e5,n:"h"},{u:864e5,c:1,t:864e5,n:"d"},{u:864e5,c:2,t:1728e5,n:"d"},{u:864e5,c:4,t:3456e5,n:"d"},{u:864e5,c:5,t:432e6,n:"d"},{u:6048e5,c:1,t:6048e5,n:"w"}],c=i/(r*3.3),l=+t-n,f=0,a=+n+f,v=+t+f,e=0;e<o.length&&l/o[e].t>c;)e++;var u=o[e].t,s=Math.floor(a/u)*u,h=Math.ceil((v-s)/u),y=s+u*h;return{min:s-f,max:y-f,steps:h,stepValue:u}},calculateXscaleRange:function(){this.xScaleRange=this._calculateDateScaleRange(this.dataRange.xmin,this.dataRange.xmax,this.chart.width,this.fontSize)},argToString:function(n){return i(+n,this.dateTimeFormat,this.useUtc)},generateXLabels:function(){var i=this.xScaleRange.min,u=this.xScaleRange.stepValue,t=new Array(this.xScaleRange.steps);n.each(t,function(n,f){var e=i+u*f;t[f]=r.formatDateValue(e)});this.xLabels=t}});t.Type.extend({name:"Scatter",defaults:{scaleArgLabel:"<%=value%>",scaleShowGridLines:!0,scaleGridLineWidth:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,scaleType:"number",useUtc:!0,scaleDateFormat:"mmm d",scaleTimeFormat:"h:MM",scaleDateTimeFormat:"mmm d, yyyy, hh:MM",datasetStroke:!0,datasetStrokeWidth:2,datasetStrokeColor:"#007ACC",datasetPointStrokeColor:"white",bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotStrokeWidth:1,pointDotRadius:4,pointHitDetectionRadius:4,multiTooltipTemplate:"<%=argLabel%>; <%=valueLabel%>",tooltipTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%=argLabel%>; <%=valueLabel%>"},initialize:function(i){this.datasets=[];this.scale=this._initScale();n.each(i,function(i){var r={label:i.label||null,strokeColor:i.strokeColor||this.options.datasetStrokeColor,pointColor:i.pointColor||i.strokeColor||this.options.datasetStrokeColor,pointStrokeColor:i.pointStrokeColor||this.options.datasetPointStrokeColor,points:[]};this.datasets.push(r);n.each(i.data,function(n){r.points.push(new t.Point({ctx:this.chart.ctx,argLabel:this.scale.argToString(+n.x),valueLabel:+n.y+"",arg:+n.x,value:+n.y,datasetLabel:i.label||null,display:this.options.pointDot,radius:this.options.pointDotRadius,hitDetectionRadius:this.options.pointHitDetectionRadius,strokeWidth:this.options.pointDotStrokeWidth,strokeColor:r.pointStrokeColor,highlightStroke:r.pointColor,fillColor:r.pointColor,highlightFill:r.pointStrokeColor}))},this)},this);var r=this._calculateRange();this.scale.setDataRange(r);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getPointsAtEvent(t):[];this._forEachPoint(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});this.render()},_initScale:function(){var n={chart:this.chart,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,labelTemplate:this.options.scaleLabel,argLabelTemplate:this.options.scaleArgLabel,showLabels:this.options.scaleShowLabels,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,display:this.options.showScale,useUtc:this.options.useUtc,dateFormat:this.options.scaleDateFormat,timeFormat:this.options.scaleTimeFormat,dateTimeFormat:this.options.scaleDateTimeFormat};return this.options.scaleType==="date"?new t.ScatterDateScale(n):new t.ScatterNumberScale(n)},getPointsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(n){n.inRange(r.x,r.y)&&i.push(n)})},this),i},showTooltip:function(i){var u,r,f,e;return this.draw(),i.length>0&&(u=i[0],r=u.tooltipPosition(),i.length==1?new t.Tooltip({x:Math.round(r.x),y:Math.round(r.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:n.template(this.options.tooltipTemplate,u),chart:this.chart,custom:this.options.customTooltips}).draw():(f=[],e=[],n.each(i,function(t){f.push(n.template(this.options.multiTooltipTemplate,t));e.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),new Chart.MultiTooltip({x:Math.round(r.x),y:Math.round(r.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:f,legendColors:e,legendColorBackground:this.options.multiTooltipKeyBackground,title:"",chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw())),this},_forEachPoint:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},_forEachDataset:function(t){n.each(this.datasets,t,this)},_calculateRange:function(){var n=undefined,t=undefined,i=undefined,r=undefined;return this._forEachPoint(function(u){(n===undefined||u.arg<n)&&(n=u.arg);(t===undefined||u.arg>t)&&(t=u.arg);(i===undefined||u.value<i)&&(i=u.value);(r===undefined||u.value>r)&&(r=u.value)}),{xmin:n,xmax:t,ymin:i,ymax:r}},_drawLine:function(t){var i=this.chart.ctx,r=undefined;i.lineJoin="round";i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor||this.options.datasetStrokeColor;i.beginPath();n.each(t.points,function(n,t){t===0?i.moveTo(n.x,n.y):this.options.bezierCurve?i.bezierCurveTo(r.controlPoints.x2,r.controlPoints.y2,n.controlPoints.x1,n.controlPoints.y1,n.x,n.y):i.lineTo(n.x,n.y);r=n},this);i.stroke()},draw:function(t){this.scale.fit();this._forEachDataset(function(n){this.scale.updatePoints(n.points,t);this.options.bezierCurve&&this.scale.updateBezierControlPoints(n.points,t,this.options.bezierCurveTension)});this.clear();this.scale.draw();this.options.datasetStroke&&n.each(this.datasets,this._drawLine,this);this.options.pointDot&&this._forEachPoint(function(n){n.draw()})}})}).call(window.Chart);
/*
//# sourceMappingURL=Chart.Scatter.min.js.map
*/